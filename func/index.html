<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>Func函数底层实现 - zg blog</title><meta name=Description content="Stay hungry, stay foolish! 🚀"><meta property="og:url" content="https://guangzou.github.io/func/"><meta property="og:site_name" content="zg blog"><meta property="og:title" content="Func函数底层实现"><meta property="og:description" content="基于 go1.22.6 版本解析 func 函数底层实现"><meta property="og:locale" content="zh_cn"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2026-02-03T16:44:51+08:00"><meta property="article:modified_time" content="2026-02-04T17:59:12+08:00"><meta property="article:tag" content="Go"><meta property="og:image" content="https://guangzou.github.io/logo.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://guangzou.github.io/logo.png"><meta name=twitter:title content="Func函数底层实现"><meta name=twitter:description content="基于 go1.22.6 版本解析 func 函数底层实现"><meta name=application-name content="My cool site"><meta name=apple-mobile-web-app-title content="My cool site"><meta name=referrer content="no-referrer"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://guangzou.github.io/func/><link rel=prev href=https://guangzou.github.io/gmp/><link rel=next href=https://guangzou.github.io/database_sql/><link rel=stylesheet href=/css/style.min.css><link rel=preload href=/lib/fontawesome-free/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=/lib/fontawesome-free/css/all.min.css></noscript><link rel=preload href=/lib/animate/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=/lib/animate/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Func函数底层实现","inLanguage":"zh-cn","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/guangzou.github.io\/func\/"},"genre":"posts","keywords":"Go","wordcount":2723,"url":"https:\/\/guangzou.github.io\/func\/","datePublished":"2026-02-03T16:44:51+08:00","dateModified":"2026-02-04T17:59:12+08:00","license":"xxx","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"zg"},"description":""}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script>const query=window.matchMedia("(prefers-color-scheme: dark)");function applyTheme(){let e=window.localStorage?.getItem("theme")||"auto",t=e==="dark"||e==="auto"&&query.matches;document.body.setAttribute("theme",t?"dark":"light"),document.body.setAttribute("cfg-theme",e)}applyTheme(),query.addEventListener("change",applyTheme)</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="zg blog"><span class=header-title-pre><i class='far fa-kiss-wink-heart fa-fw' aria-hidden=true></i></span><span id=id-1 class=typeit></span><span class=header-title-post><i class='fas fa-book fa-fw'></i></span></a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>文章 </a><a class=menu-item href=/tags/>标签 </a><a class=menu-item href=/categories/>分类 </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder=搜索文章标题或内容... id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fas fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=清空><i class="fas fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i>
</span></span><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="zg blog"><span class=header-title-pre><i class='far fa-kiss-wink-heart fa-fw' aria-hidden=true></i></span><span id=id-2 class=typeit></span><span class=header-title-post><i class='fas fa-book fa-fw'></i></span></a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=搜索文章标题或内容... id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fas fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=清空><i class="fas fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>取消</a></div><a class=menu-item href=/posts/ title>文章</a><a class=menu-item href=/tags/ title>标签</a><a class=menu-item href=/categories/ title>分类</a><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题>
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>目录</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Func函数底层实现</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>zg</a></span>&nbsp;<span class=post-category>收录于 <a href=/categories/go%E8%AF%AD%E8%A8%80/><i class="far fa-folder fa-fw" aria-hidden=true></i>Go语言</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2026-02-03>2026-02-03</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;约 2723 字&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;预计阅读 6 分钟&nbsp;</div></div><div class=featured-image><img class=lazyload src=/svg/loading.min.svg data-src=/images/Func%e5%ba%95%e5%b1%82%e6%ba%90%e7%a0%81%e8%a7%a3%e6%9e%90_banner.png data-srcset="/images/Func%e5%ba%95%e5%b1%82%e6%ba%90%e7%a0%81%e8%a7%a3%e6%9e%90_banner.png, /images/Func%e5%ba%95%e5%b1%82%e6%ba%90%e7%a0%81%e8%a7%a3%e6%9e%90_banner.png 1.5x, /images/Func%e5%ba%95%e5%b1%82%e6%ba%90%e7%a0%81%e8%a7%a3%e6%9e%90_banner.png 2x" data-sizes=auto alt=/images/Func底层源码解析_banner.png title=/images/Func底层源码解析_banner.png></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><ul><li><a href=#一函数执行用例>一、函数执行用例</a></li><li><a href=#二汇编代码分析>二、汇编代码分析</a></li></ul></li></ul></nav></div></div><div class=content id=content><p>基于 go1.22.6 版本解析 func 函数底层实现</p><h2 id=一函数执行用例>一、函数执行用例</h2><div class="code-block code-line-numbers" style="counter-reset:code-block 0"><div class="code-header language-go"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=复制到剪贴板><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span><span class=w> </span><span class=nx>main</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=kd>func</span><span class=w> </span><span class=nf>main</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>var</span><span class=w> </span><span class=nx>r1</span><span class=p>,</span><span class=w> </span><span class=nx>r2</span><span class=p>,</span><span class=w> </span><span class=nx>r3</span><span class=p>,</span><span class=w> </span><span class=nx>r4</span><span class=p>,</span><span class=w> </span><span class=nx>r5</span><span class=p>,</span><span class=w> </span><span class=nx>r6</span><span class=p>,</span><span class=w> </span><span class=nx>r7</span><span class=p>,</span><span class=w> </span><span class=nx>r8</span><span class=p>,</span><span class=w> </span><span class=nx>r9</span><span class=p>,</span><span class=w> </span><span class=nx>r10</span><span class=p>,</span><span class=w> </span><span class=nx>r11</span><span class=w> </span><span class=kt>int64</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=mi>4</span><span class=p>,</span><span class=w> </span><span class=mi>5</span><span class=p>,</span><span class=w> </span><span class=mi>6</span><span class=p>,</span><span class=w> </span><span class=mi>7</span><span class=p>,</span><span class=w> </span><span class=mi>8</span><span class=p>,</span><span class=w> </span><span class=mi>9</span><span class=p>,</span><span class=w> </span><span class=mi>10</span><span class=p>,</span><span class=w> </span><span class=mi>11</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nx>a</span><span class=p>,</span><span class=w> </span><span class=nx>b</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nf>A</span><span class=p>(</span><span class=nx>r1</span><span class=p>,</span><span class=w> </span><span class=nx>r2</span><span class=p>,</span><span class=w> </span><span class=nx>r3</span><span class=p>,</span><span class=w> </span><span class=nx>r4</span><span class=p>,</span><span class=w> </span><span class=nx>r5</span><span class=p>,</span><span class=w> </span><span class=nx>r6</span><span class=p>,</span><span class=w> </span><span class=nx>r7</span><span class=p>,</span><span class=w> </span><span class=nx>r8</span><span class=p>,</span><span class=w> </span><span class=nx>r9</span><span class=p>,</span><span class=w> </span><span class=nx>r10</span><span class=p>,</span><span class=w> </span><span class=nx>r11</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nx>c</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nx>a</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>b</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nb>print</span><span class=p>(</span><span class=nx>c</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=kd>func</span><span class=w> </span><span class=nf>A</span><span class=p>(</span><span class=nx>p1</span><span class=p>,</span><span class=w> </span><span class=nx>p2</span><span class=p>,</span><span class=w> </span><span class=nx>p3</span><span class=p>,</span><span class=w> </span><span class=nx>p4</span><span class=p>,</span><span class=w> </span><span class=nx>p5</span><span class=p>,</span><span class=w> </span><span class=nx>p6</span><span class=p>,</span><span class=w> </span><span class=nx>p7</span><span class=p>,</span><span class=w> </span><span class=nx>p8</span><span class=p>,</span><span class=w> </span><span class=nx>p9</span><span class=p>,</span><span class=w> </span><span class=nx>p10</span><span class=p>,</span><span class=w> </span><span class=nx>p11</span><span class=w> </span><span class=kt>int64</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=kt>int64</span><span class=p>,</span><span class=w> </span><span class=kt>int64</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=nx>p1</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>p2</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>p3</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>p4</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>p5</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>p6</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>p7</span><span class=p>,</span><span class=w> </span><span class=nx>p2</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>p4</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>p6</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>p7</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>p8</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>p9</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>p10</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>p11</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div><p>执行命令打印 main.go 的汇编代码：</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-shell"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=复制到剪贴板><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=nv>GOOS</span><span class=o>=</span>linux <span class=nv>GOARCH</span><span class=o>=</span>amd64 go tool compile -S -N -l main.go</span></span></code></pre></div></div><h2 id=二汇编代码分析>二、汇编代码分析</h2><p>分析汇编代码 main.main：</p><div class="code-block code-line-numbers" style="counter-reset:code-block 0"><div class="code-header language-shell"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=复制到剪贴板><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=s2>&#34;&#34;</span>.main STEXT <span class=nv>size</span><span class=o>=</span><span class=m>362</span> <span class=nv>args</span><span class=o>=</span>0x0 <span class=nv>locals</span><span class=o>=</span>0xe0 <span class=nv>funcid</span><span class=o>=</span>0x0
</span></span><span class=line><span class=cl>        0x0000 <span class=m>00000</span> <span class=o>(</span>main.go:3<span class=o>)</span>        TEXT    <span class=s2>&#34;&#34;</span>.main<span class=o>(</span>SB<span class=o>)</span>, ABIInternal, <span class=nv>$224</span>-0    <span class=c1>#main函数定义, $224-0：224表示将分配的main函数的栈帧大小；0指定了调用方传入的参数，由于main是最上层函数，这里没有入参</span>
</span></span><span class=line><span class=cl>        0x0000 <span class=m>00000</span> <span class=o>(</span>main.go:3<span class=o>)</span>        LEAQ    -96<span class=o>(</span>SP<span class=o>)</span>, R12
</span></span><span class=line><span class=cl>        0x0005 <span class=m>00005</span> <span class=o>(</span>main.go:3<span class=o>)</span>        CMPQ    R12, 16<span class=o>(</span>R14<span class=o>)</span>
</span></span><span class=line><span class=cl>        0x0009 <span class=m>00009</span> <span class=o>(</span>main.go:3<span class=o>)</span>        PCDATA  <span class=nv>$0</span>, <span class=nv>$-</span><span class=m>2</span>
</span></span><span class=line><span class=cl>        0x0009 <span class=m>00009</span> <span class=o>(</span>main.go:3<span class=o>)</span>        JLS     <span class=m>349</span>
</span></span><span class=line><span class=cl>        0x000f <span class=m>00015</span> <span class=o>(</span>main.go:3<span class=o>)</span>        PCDATA  <span class=nv>$0</span>, <span class=nv>$-</span><span class=m>1</span>
</span></span><span class=line><span class=cl>        0x000f <span class=m>00015</span> <span class=o>(</span>main.go:3<span class=o>)</span>        SUBQ    <span class=nv>$224</span>, SP                     <span class=c1># 为main函数栈帧分配了224字节的空间，注意此时的SP寄存器指向，会往下移动224个字节</span>
</span></span><span class=line><span class=cl>        0x0016 <span class=m>00022</span> <span class=o>(</span>main.go:3<span class=o>)</span>        MOVQ    BP, 216<span class=o>(</span>SP<span class=o>)</span>                  <span class=c1># BP寄存器存放的是main函数caller的基址，movq这条指令是将main函数caller的基址入栈</span>
</span></span><span class=line><span class=cl>        0x001e <span class=m>00030</span> <span class=o>(</span>main.go:3<span class=o>)</span>        LEAQ    216<span class=o>(</span>SP<span class=o>)</span>, BP                  <span class=c1># 将main函数的基址存放到到BP寄存器</span>
</span></span><span class=line><span class=cl>        0x0026 <span class=m>00038</span> <span class=o>(</span>main.go:3<span class=o>)</span>        FUNCDATA        <span class=nv>$0</span>, gclocals·33cdeccccebe80329f1fdbee7f5874cb<span class=o>(</span>SB<span class=o>)</span>
</span></span><span class=line><span class=cl>        0x0026 <span class=m>00038</span> <span class=o>(</span>main.go:3<span class=o>)</span>        FUNCDATA        <span class=nv>$1</span>, gclocals·33cdeccccebe80329f1fdbee7f5874cb<span class=o>(</span>SB<span class=o>)</span>
</span></span><span class=line><span class=cl>        0x0026 <span class=m>00038</span> <span class=o>(</span>main.go:4<span class=o>)</span>        MOVQ    <span class=nv>$1</span>, <span class=s2>&#34;&#34;</span>.r1+168<span class=o>(</span>SP<span class=o>)</span>            <span class=c1># main函数局部变量r1入栈    </span>
</span></span><span class=line><span class=cl>        0x0032 <span class=m>00050</span> <span class=o>(</span>main.go:4<span class=o>)</span>        MOVQ    <span class=nv>$2</span>, <span class=s2>&#34;&#34;</span>.r2+144<span class=o>(</span>SP<span class=o>)</span>            <span class=c1># main函数局部变量r2入栈</span>
</span></span><span class=line><span class=cl>        0x003e <span class=m>00062</span> <span class=o>(</span>main.go:4<span class=o>)</span>        MOVQ    <span class=nv>$3</span>, <span class=s2>&#34;&#34;</span>.r3+136<span class=o>(</span>SP<span class=o>)</span>            <span class=c1># main函数局部变量r3入栈</span>
</span></span><span class=line><span class=cl>        0x004a <span class=m>00074</span> <span class=o>(</span>main.go:4<span class=o>)</span>        MOVQ    <span class=nv>$4</span>, <span class=s2>&#34;&#34;</span>.r4+128<span class=o>(</span>SP<span class=o>)</span>            <span class=c1># main函数局部变量r4入栈</span>
</span></span><span class=line><span class=cl>        0x0056 <span class=m>00086</span> <span class=o>(</span>main.go:4<span class=o>)</span>        MOVQ    <span class=nv>$5</span>, <span class=s2>&#34;&#34;</span>.r5+120<span class=o>(</span>SP<span class=o>)</span>            <span class=c1># main函数局部变量r5入栈</span>
</span></span><span class=line><span class=cl>        0x005f <span class=m>00095</span> <span class=o>(</span>main.go:4<span class=o>)</span>        MOVQ    <span class=nv>$6</span>, <span class=s2>&#34;&#34;</span>.r6+112<span class=o>(</span>SP<span class=o>)</span>            <span class=c1># main函数局部变量r6入栈</span>
</span></span><span class=line><span class=cl>        0x0068 <span class=m>00104</span> <span class=o>(</span>main.go:4<span class=o>)</span>        MOVQ    <span class=nv>$7</span>, <span class=s2>&#34;&#34;</span>.r7+104<span class=o>(</span>SP<span class=o>)</span>            <span class=c1># main函数局部变量r7入栈</span>
</span></span><span class=line><span class=cl>        0x0071 <span class=m>00113</span> <span class=o>(</span>main.go:4<span class=o>)</span>        MOVQ    <span class=nv>$8</span>, <span class=s2>&#34;&#34;</span>.r8+96<span class=o>(</span>SP<span class=o>)</span>             <span class=c1># main函数局部变量r8入栈 </span>
</span></span><span class=line><span class=cl>        0x007a <span class=m>00122</span> <span class=o>(</span>main.go:4<span class=o>)</span>        MOVQ    <span class=nv>$9</span>, <span class=s2>&#34;&#34;</span>.r9+88<span class=o>(</span>SP<span class=o>)</span>             <span class=c1># main函数局部变量r9入栈</span>
</span></span><span class=line><span class=cl>        0x0083 <span class=m>00131</span> <span class=o>(</span>main.go:4<span class=o>)</span>        MOVQ    <span class=nv>$10</span>, <span class=s2>&#34;&#34;</span>.r10+160<span class=o>(</span>SP<span class=o>)</span>          <span class=c1># main函数局部变量r10入栈</span>
</span></span><span class=line><span class=cl>        0x008f <span class=m>00143</span> <span class=o>(</span>main.go:4<span class=o>)</span>        MOVQ    <span class=nv>$11</span>, <span class=s2>&#34;&#34;</span>.r11+152<span class=o>(</span>SP<span class=o>)</span>          <span class=c1># main函数局部变量r11入栈</span>
</span></span><span class=line><span class=cl>        0x009b <span class=m>00155</span> <span class=o>(</span>main.go:5<span class=o>)</span>        MOVQ    <span class=s2>&#34;&#34;</span>.r2+144<span class=o>(</span>SP<span class=o>)</span>, BX            <span class=c1># 将局部变量r2传给寄存器BX</span>
</span></span><span class=line><span class=cl>        0x00a3 <span class=m>00163</span> <span class=o>(</span>main.go:5<span class=o>)</span>        MOVQ    <span class=s2>&#34;&#34;</span>.r3+136<span class=o>(</span>SP<span class=o>)</span>, CX            <span class=c1># 将局部变量r3传给寄存器CX</span>
</span></span><span class=line><span class=cl>        0x00ab <span class=m>00171</span> <span class=o>(</span>main.go:5<span class=o>)</span>        MOVQ    <span class=s2>&#34;&#34;</span>.r4+128<span class=o>(</span>SP<span class=o>)</span>, DI            <span class=c1># 将局部变量r4传给寄存器DI</span>
</span></span><span class=line><span class=cl>        0x00b3 <span class=m>00179</span> <span class=o>(</span>main.go:5<span class=o>)</span>        MOVQ    <span class=s2>&#34;&#34;</span>.r5+120<span class=o>(</span>SP<span class=o>)</span>, SI            <span class=c1># 将局部变量r5传给寄存器SI</span>
</span></span><span class=line><span class=cl>        0x00b8 <span class=m>00184</span> <span class=o>(</span>main.go:5<span class=o>)</span>        MOVQ    <span class=s2>&#34;&#34;</span>.r6+112<span class=o>(</span>SP<span class=o>)</span>, R8            <span class=c1># 将局部变量r6传给寄存器R8</span>
</span></span><span class=line><span class=cl>        0x00bd <span class=m>00189</span> <span class=o>(</span>main.go:5<span class=o>)</span>        MOVQ    <span class=s2>&#34;&#34;</span>.r7+104<span class=o>(</span>SP<span class=o>)</span>, R9            <span class=c1># 将局部变量r7传给寄存器R9</span>
</span></span><span class=line><span class=cl>        0x00c2 <span class=m>00194</span> <span class=o>(</span>main.go:5<span class=o>)</span>        MOVQ    <span class=s2>&#34;&#34;</span>.r8+96<span class=o>(</span>SP<span class=o>)</span>, R10            <span class=c1># 将局部变量r8传给寄存器R10</span>
</span></span><span class=line><span class=cl>        0x00c7 <span class=m>00199</span> <span class=o>(</span>main.go:5<span class=o>)</span>        MOVQ    <span class=s2>&#34;&#34;</span>.r9+88<span class=o>(</span>SP<span class=o>)</span>, R11            <span class=c1># 将局部变量r9传给寄存器R11</span>
</span></span><span class=line><span class=cl>        0x00cc <span class=m>00204</span> <span class=o>(</span>main.go:5<span class=o>)</span>        MOVQ    <span class=s2>&#34;&#34;</span>.r10+160<span class=o>(</span>SP<span class=o>)</span>, DX           <span class=c1># 将局部变量r10传给寄存器DX</span>
</span></span><span class=line><span class=cl>        0x00d4 <span class=m>00212</span> <span class=o>(</span>main.go:5<span class=o>)</span>        MOVQ    <span class=s2>&#34;&#34;</span>.r1+168<span class=o>(</span>SP<span class=o>)</span>, AX            <span class=c1># 将局部变量r1传给寄存器DX</span>
</span></span><span class=line><span class=cl>        0x00dc <span class=m>00220</span> <span class=o>(</span>main.go:5<span class=o>)</span>        MOVQ    DX, <span class=o>(</span>SP<span class=o>)</span>                     <span class=c1># 将寄存器DX保存的r10传给SP指向的栈顶</span>
</span></span><span class=line><span class=cl>        0x00e0 <span class=m>00224</span> <span class=o>(</span>main.go:5<span class=o>)</span>        MOVQ    <span class=nv>$11</span>, 8<span class=o>(</span>SP<span class=o>)</span>                   <span class=c1># 将变量r11传给SP+8</span>
</span></span><span class=line><span class=cl>        0x00e9 <span class=m>00233</span> <span class=o>(</span>main.go:5<span class=o>)</span>        PCDATA  <span class=nv>$1</span>, <span class=nv>$0</span>
</span></span><span class=line><span class=cl>        0x00e9 <span class=m>00233</span> <span class=o>(</span>main.go:5<span class=o>)</span>        CALL    <span class=s2>&#34;&#34;</span>.A<span class=o>(</span>SB<span class=o>)</span>                     <span class=c1># 调用 A 函数</span>
</span></span><span class=line><span class=cl>        0x00ee <span class=m>00238</span> <span class=o>(</span>main.go:5<span class=o>)</span>        MOVQ    AX, <span class=s2>&#34;&#34;</span>..autotmp_14+208<span class=o>(</span>SP<span class=o>)</span>   <span class=c1># 将寄存器AX存的函数A的第一个返回值a赋值给SP+208</span>
</span></span><span class=line><span class=cl>        0x00f6 <span class=m>00246</span> <span class=o>(</span>main.go:5<span class=o>)</span>        MOVQ    BX, <span class=s2>&#34;&#34;</span>..autotmp_15+200<span class=o>(</span>SP<span class=o>)</span>   <span class=c1># 将寄存器BX存的函数A的第二个返回值b赋值给SP+200</span>
</span></span><span class=line><span class=cl>        0x00fe <span class=m>00254</span> <span class=o>(</span>main.go:5<span class=o>)</span>        MOVQ    <span class=s2>&#34;&#34;</span>..autotmp_14+208<span class=o>(</span>SP<span class=o>)</span>, DX   <span class=c1># 将SP+208保存的A函数第一个返回值a传给寄存器DX</span>
</span></span><span class=line><span class=cl>        0x0106 <span class=m>00262</span> <span class=o>(</span>main.go:5<span class=o>)</span>        MOVQ    DX, <span class=s2>&#34;&#34;</span>.a+192<span class=o>(</span>SP<span class=o>)</span>             <span class=c1># 将A函数第一个返回值a通过寄存器DX入栈到SP+192</span>
</span></span><span class=line><span class=cl>        0x010e <span class=m>00270</span> <span class=o>(</span>main.go:5<span class=o>)</span>        MOVQ    <span class=s2>&#34;&#34;</span>..autotmp_15+200<span class=o>(</span>SP<span class=o>)</span>, DX   <span class=c1># 将SP+200保存的A函数第二个返回值b传给寄存器DX</span>
</span></span><span class=line><span class=cl>        0x0116 <span class=m>00278</span> <span class=o>(</span>main.go:5<span class=o>)</span>        MOVQ    DX, <span class=s2>&#34;&#34;</span>.b+184<span class=o>(</span>SP<span class=o>)</span>             <span class=c1># 将第二个返回值b通过寄存器DX入栈到SP+184</span>
</span></span><span class=line><span class=cl>        0x011e <span class=m>00286</span> <span class=o>(</span>main.go:6<span class=o>)</span>        MOVQ    <span class=s2>&#34;&#34;</span>.a+192<span class=o>(</span>SP<span class=o>)</span>, DX             <span class=c1># 将返回值a传给DX寄存器</span>
</span></span><span class=line><span class=cl>        0x0126 <span class=m>00294</span> <span class=o>(</span>main.go:6<span class=o>)</span>        ADDQ    <span class=s2>&#34;&#34;</span>.b+184<span class=o>(</span>SP<span class=o>)</span>, DX             <span class=c1># 将a+b赋值给DX寄存器</span>
</span></span><span class=line><span class=cl>        0x012e <span class=m>00302</span> <span class=o>(</span>main.go:6<span class=o>)</span>        MOVQ    DX, <span class=s2>&#34;&#34;</span>.c+176<span class=o>(</span>SP<span class=o>)</span>             <span class=c1># 将DX寄存器的值入栈到SP+176</span>
</span></span><span class=line><span class=cl>        0x0136 <span class=m>00310</span> <span class=o>(</span>main.go:7<span class=o>)</span>        CALL    runtime.printlock<span class=o>(</span>SB<span class=o>)</span>        
</span></span><span class=line><span class=cl>        0x013b <span class=m>00315</span> <span class=o>(</span>main.go:7<span class=o>)</span>        MOVQ    <span class=s2>&#34;&#34;</span>.c+176<span class=o>(</span>SP<span class=o>)</span>, AX             <span class=c1># 将SP+176存储的入参c赋值给AX</span>
</span></span><span class=line><span class=cl>        0x0143 <span class=m>00323</span> <span class=o>(</span>main.go:7<span class=o>)</span>        CALL    runtime.printint<span class=o>(</span>SB<span class=o>)</span>         <span class=c1># 调用打印函数打印c</span>
</span></span><span class=line><span class=cl>        0x0148 <span class=m>00328</span> <span class=o>(</span>main.go:7<span class=o>)</span>        CALL    runtime.printunlock<span class=o>(</span>SB<span class=o>)</span>
</span></span><span class=line><span class=cl>        0x014d <span class=m>00333</span> <span class=o>(</span>main.go:8<span class=o>)</span>        MOVQ    216<span class=o>(</span>SP<span class=o>)</span>, BP
</span></span><span class=line><span class=cl>        0x0155 <span class=m>00341</span> <span class=o>(</span>main.go:8<span class=o>)</span>        ADDQ    <span class=nv>$224</span>, SP
</span></span><span class=line><span class=cl>        0x015c <span class=m>00348</span> <span class=o>(</span>main.go:8<span class=o>)</span>        RET</span></span></code></pre></div></div><p>main函数调用A函数的参数个数为11个，其中前 9 个参数分别是通过寄存器 AX、BX、CX、DI、SI、R8、R9、R10、R11传递，后面两个通过栈顶的SP，SP+8地址传递。</p><p><img class=lazyload src=/svg/loading.min.svg data-src=../images/main.main%e6%b1%87%e7%bc%96.png data-srcset="../images/main.main%e6%b1%87%e7%bc%96.png, ../images/main.main%e6%b1%87%e7%bc%96.png 1.5x, ../images/main.main%e6%b1%87%e7%bc%96.png 2x" data-sizes=auto alt=../images/main.main汇编.png title=../images/main.main汇编.png></p><p>下面再看函数 A 的汇编代码：</p><div class="code-block code-line-numbers" style="counter-reset:code-block 0"><div class="code-header language-shell"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=复制到剪贴板><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=s2>&#34;&#34;</span>.A STEXT nosplit <span class=nv>size</span><span class=o>=</span><span class=m>175</span> <span class=nv>args</span><span class=o>=</span>0x58 <span class=nv>locals</span><span class=o>=</span>0x18 <span class=nv>funcid</span><span class=o>=</span>0x0
</span></span><span class=line><span class=cl>        0x0000 <span class=m>00000</span> <span class=o>(</span>main.go:10<span class=o>)</span>       TEXT    <span class=s2>&#34;&#34;</span>.A<span class=o>(</span>SB<span class=o>)</span>, NOSPLIT<span class=p>|</span>ABIInternal, <span class=nv>$24</span>-88
</span></span><span class=line><span class=cl>        0x0000 <span class=m>00000</span> <span class=o>(</span>main.go:10<span class=o>)</span>       SUBQ    <span class=nv>$24</span>, SP                        <span class=c1># 为A函数栈帧分配了24字节的空间</span>
</span></span><span class=line><span class=cl>        0x0004 <span class=m>00004</span> <span class=o>(</span>main.go:10<span class=o>)</span>       MOVQ    BP, 16<span class=o>(</span>SP<span class=o>)</span>
</span></span><span class=line><span class=cl>        0x0009 <span class=m>00009</span> <span class=o>(</span>main.go:10<span class=o>)</span>       LEAQ    16<span class=o>(</span>SP<span class=o>)</span>, BP
</span></span><span class=line><span class=cl>        0x000e <span class=m>00014</span> <span class=o>(</span>main.go:10<span class=o>)</span>       FUNCDATA        <span class=nv>$0</span>, gclocals·33cdeccccebe80329f1fdbee7f5874cb<span class=o>(</span>SB<span class=o>)</span>
</span></span><span class=line><span class=cl>        0x000e <span class=m>00014</span> <span class=o>(</span>main.go:10<span class=o>)</span>       FUNCDATA        <span class=nv>$1</span>, gclocals·33cdeccccebe80329f1fdbee7f5874cb<span class=o>(</span>SB<span class=o>)</span>
</span></span><span class=line><span class=cl>        0x000e <span class=m>00014</span> <span class=o>(</span>main.go:10<span class=o>)</span>       FUNCDATA        <span class=nv>$5</span>, <span class=s2>&#34;&#34;</span>.A.arginfo1<span class=o>(</span>SB<span class=o>)</span>
</span></span><span class=line><span class=cl>        0x000e <span class=m>00014</span> <span class=o>(</span>main.go:10<span class=o>)</span>       MOVQ    AX, <span class=s2>&#34;&#34;</span>.p1+48<span class=o>(</span>SP<span class=o>)</span>               <span class=c1># 寄存器AX存储的r1赋值给SP+48    </span>
</span></span><span class=line><span class=cl>        0x0013 <span class=m>00019</span> <span class=o>(</span>main.go:10<span class=o>)</span>       MOVQ    BX, <span class=s2>&#34;&#34;</span>.p2+56<span class=o>(</span>SP<span class=o>)</span>               <span class=c1># 寄存器BX存储的r2赋值给SP+56</span>
</span></span><span class=line><span class=cl>        0x0018 <span class=m>00024</span> <span class=o>(</span>main.go:10<span class=o>)</span>       MOVQ    CX, <span class=s2>&#34;&#34;</span>.p3+64<span class=o>(</span>SP<span class=o>)</span>               <span class=c1># 寄存器CX存储的r3赋值给SP+64</span>
</span></span><span class=line><span class=cl>        0x001d <span class=m>00029</span> <span class=o>(</span>main.go:10<span class=o>)</span>       MOVQ    DI, <span class=s2>&#34;&#34;</span>.p4+72<span class=o>(</span>SP<span class=o>)</span>               <span class=c1># 寄存器DI存储的r4赋值给SP+72</span>
</span></span><span class=line><span class=cl>        0x0022 <span class=m>00034</span> <span class=o>(</span>main.go:10<span class=o>)</span>       MOVQ    SI, <span class=s2>&#34;&#34;</span>.p5+80<span class=o>(</span>SP<span class=o>)</span>               <span class=c1># 寄存器SI存储的r5赋值给SP+80</span>
</span></span><span class=line><span class=cl>        0x0027 <span class=m>00039</span> <span class=o>(</span>main.go:10<span class=o>)</span>       MOVQ    R8, <span class=s2>&#34;&#34;</span>.p6+88<span class=o>(</span>SP<span class=o>)</span>               <span class=c1># 寄存器R8存储的r6赋值给SP+88</span>
</span></span><span class=line><span class=cl>        0x002c <span class=m>00044</span> <span class=o>(</span>main.go:10<span class=o>)</span>       MOVQ    R9, <span class=s2>&#34;&#34;</span>.p7+96<span class=o>(</span>SP<span class=o>)</span>               <span class=c1># 寄存器R9存储的r7赋值给SP+96</span>
</span></span><span class=line><span class=cl>        0x0031 <span class=m>00049</span> <span class=o>(</span>main.go:10<span class=o>)</span>       MOVQ    R10, <span class=s2>&#34;&#34;</span>.p8+104<span class=o>(</span>SP<span class=o>)</span>             <span class=c1># 寄存器R10存储的r8赋值给SP+104</span>
</span></span><span class=line><span class=cl>        0x0036 <span class=m>00054</span> <span class=o>(</span>main.go:10<span class=o>)</span>       MOVQ    R11, <span class=s2>&#34;&#34;</span>.p9+112<span class=o>(</span>SP<span class=o>)</span>             <span class=c1># 寄存器R11存储的r9赋值给SP+112</span>
</span></span><span class=line><span class=cl>        0x003b <span class=m>00059</span> <span class=o>(</span>main.go:10<span class=o>)</span>       MOVQ    <span class=nv>$0</span>, <span class=s2>&#34;&#34;</span>.~r11+8<span class=o>(</span>SP<span class=o>)</span>              <span class=c1># 初始化第一个返回值a存放地址SP+8为0</span>
</span></span><span class=line><span class=cl>        0x0044 <span class=m>00068</span> <span class=o>(</span>main.go:10<span class=o>)</span>       MOVQ    <span class=nv>$0</span>, <span class=s2>&#34;&#34;</span>.~r12<span class=o>(</span>SP<span class=o>)</span>                <span class=c1># 初始化第二个返回值b存放地址SP为0</span>
</span></span><span class=line><span class=cl>        0x004c <span class=m>00076</span> <span class=o>(</span>main.go:11<span class=o>)</span>       MOVQ    <span class=s2>&#34;&#34;</span>.p1+48<span class=o>(</span>SP<span class=o>)</span>, CX               <span class=c1># SP+48存储的r1赋值给CX寄存器</span>
</span></span><span class=line><span class=cl>        0x0051 <span class=m>00081</span> <span class=o>(</span>main.go:11<span class=o>)</span>       ADDQ    <span class=s2>&#34;&#34;</span>.p2+56<span class=o>(</span>SP<span class=o>)</span>, CX               <span class=c1># CX+r2赋值给CX寄存器</span>
</span></span><span class=line><span class=cl>        0x0056 <span class=m>00086</span> <span class=o>(</span>main.go:11<span class=o>)</span>       ADDQ    <span class=s2>&#34;&#34;</span>.p3+64<span class=o>(</span>SP<span class=o>)</span>, CX               <span class=c1># CX+r3赋值给CX寄存器</span>
</span></span><span class=line><span class=cl>        0x005b <span class=m>00091</span> <span class=o>(</span>main.go:11<span class=o>)</span>       ADDQ    <span class=s2>&#34;&#34;</span>.p4+72<span class=o>(</span>SP<span class=o>)</span>, CX               <span class=c1># CX+r4赋值给CX寄存器</span>
</span></span><span class=line><span class=cl>        0x0060 <span class=m>00096</span> <span class=o>(</span>main.go:11<span class=o>)</span>       ADDQ    <span class=s2>&#34;&#34;</span>.p5+80<span class=o>(</span>SP<span class=o>)</span>, CX               <span class=c1># CX+r5赋值给CX寄存器</span>
</span></span><span class=line><span class=cl>        0x0065 <span class=m>00101</span> <span class=o>(</span>main.go:11<span class=o>)</span>       ADDQ    <span class=s2>&#34;&#34;</span>.p6+88<span class=o>(</span>SP<span class=o>)</span>, CX               <span class=c1># CX+r6赋值给CX寄存器</span>
</span></span><span class=line><span class=cl>        0x006a <span class=m>00106</span> <span class=o>(</span>main.go:11<span class=o>)</span>       ADDQ    <span class=s2>&#34;&#34;</span>.p7+96<span class=o>(</span>SP<span class=o>)</span>, CX               <span class=c1># CX+r7赋值给CX寄存器</span>
</span></span><span class=line><span class=cl>        0x006f <span class=m>00111</span> <span class=o>(</span>main.go:11<span class=o>)</span>       MOVQ    CX, <span class=s2>&#34;&#34;</span>.~r11+8<span class=o>(</span>SP<span class=o>)</span>              <span class=c1># CX寄存器赋值给第一个返回值存放地址SP+8</span>
</span></span><span class=line><span class=cl>        0x0074 <span class=m>00116</span> <span class=o>(</span>main.go:11<span class=o>)</span>       MOVQ    <span class=s2>&#34;&#34;</span>.p2+56<span class=o>(</span>SP<span class=o>)</span>, BX               <span class=c1># r2赋值给BX寄存器</span>
</span></span><span class=line><span class=cl>        0x0079 <span class=m>00121</span> <span class=o>(</span>main.go:11<span class=o>)</span>       ADDQ    <span class=s2>&#34;&#34;</span>.p4+72<span class=o>(</span>SP<span class=o>)</span>, BX               <span class=c1># BX+r4赋值给BX寄存器</span>
</span></span><span class=line><span class=cl>        0x007e <span class=m>00126</span> <span class=o>(</span>main.go:11<span class=o>)</span>       ADDQ    <span class=s2>&#34;&#34;</span>.p6+88<span class=o>(</span>SP<span class=o>)</span>, BX               <span class=c1># BX+r6赋值给BX寄存器</span>
</span></span><span class=line><span class=cl>        0x0083 <span class=m>00131</span> <span class=o>(</span>main.go:11<span class=o>)</span>       ADDQ    <span class=s2>&#34;&#34;</span>.p7+96<span class=o>(</span>SP<span class=o>)</span>, BX               <span class=c1># BX+r7赋值给BX寄存器</span>
</span></span><span class=line><span class=cl>        0x0088 <span class=m>00136</span> <span class=o>(</span>main.go:11<span class=o>)</span>       ADDQ    <span class=s2>&#34;&#34;</span>.p8+104<span class=o>(</span>SP<span class=o>)</span>, BX              <span class=c1># BX+r8赋值给BX寄存器</span>
</span></span><span class=line><span class=cl>        0x008d <span class=m>00141</span> <span class=o>(</span>main.go:11<span class=o>)</span>       ADDQ    <span class=s2>&#34;&#34;</span>.p9+112<span class=o>(</span>SP<span class=o>)</span>, BX              <span class=c1># BX+r9赋值给BX寄存器</span>
</span></span><span class=line><span class=cl>        0x0092 <span class=m>00146</span> <span class=o>(</span>main.go:11<span class=o>)</span>       ADDQ    <span class=s2>&#34;&#34;</span>.p10+32<span class=o>(</span>SP<span class=o>)</span>, BX              <span class=c1># BX+r11赋值给BX寄存器</span>
</span></span><span class=line><span class=cl>        0x0097 <span class=m>00151</span> <span class=o>(</span>main.go:11<span class=o>)</span>       ADDQ    <span class=s2>&#34;&#34;</span>.p11+40<span class=o>(</span>SP<span class=o>)</span>, BX              <span class=c1># BX+r10赋值给BX寄存器</span>
</span></span><span class=line><span class=cl>        0x009c <span class=m>00156</span> <span class=o>(</span>main.go:11<span class=o>)</span>       MOVQ    BX, <span class=s2>&#34;&#34;</span>.~r12<span class=o>(</span>SP<span class=o>)</span>                <span class=c1># BX寄存器赋值给第二个返回值存放地址SP</span>
</span></span><span class=line><span class=cl>        0x00a0 <span class=m>00160</span> <span class=o>(</span>main.go:11<span class=o>)</span>       MOVQ    <span class=s2>&#34;&#34;</span>.~r11+8<span class=o>(</span>SP<span class=o>)</span>, AX              <span class=c1># 第一个返回值SP+8的值赋值给AX寄存器</span>
</span></span><span class=line><span class=cl>        0x00a5 <span class=m>00165</span> <span class=o>(</span>main.go:11<span class=o>)</span>       MOVQ    16<span class=o>(</span>SP<span class=o>)</span>, BP                     <span class=c1># main返回地址赋值给BP</span>
</span></span><span class=line><span class=cl>        0x00aa <span class=m>00170</span> <span class=o>(</span>main.go:11<span class=o>)</span>       ADDQ    <span class=nv>$24</span>, SP                        <span class=c1># 回收A函数栈帧空间</span>
</span></span><span class=line><span class=cl>        0x00ae <span class=m>00174</span> <span class=o>(</span>main.go:11<span class=o>)</span>       RET</span></span></code></pre></div></div><p>在A函数栈中，我们可以看到：程序先把r1<del>r9参数分别从寄存器赋值到main栈帧的入参地址部分，即当前的SP+48</del>SP+112位。</p><p>此时的栈结构布局是：</p><p><img class=lazyload src=/svg/loading.min.svg data-src=../images/main.A%e6%b1%87%e7%bc%96.png data-srcset="../images/main.A%e6%b1%87%e7%bc%96.png, ../images/main.A%e6%b1%87%e7%bc%96.png 1.5x, ../images/main.A%e6%b1%87%e7%bc%96.png 2x" data-sizes=auto alt=../images/main.A汇编.png title=../images/main.A汇编.png></p><p>Go1.17.1之前的函数调用，参数都在栈上传递；Go1.17.1以后，9个以内的参数在寄存器传递，9个以外的在栈上传递；Go1.17.1之前版本，callee函数返回值通过caller栈传递；Go1.17.1以后，函数调用的返回值，9个以内通过寄存器传递回caller，9个以外在栈上传递。</p><p>在Go 1.17的版本发布说明文档中有提到：<strong>切换到基于寄存器的调用惯例后，一组有代表性的Go包和程序的基准测试显示，Go程序的运行性能提高了约5%，二进制文件大小减少约2%</strong>。</p><p>由于CPU访问寄存器的速度要远高于栈内存，参数在栈上传递会增加栈内存空间，并且影响栈的扩缩容和垃圾回收，改为寄存器传递，这些缺点都得到了优化，Go程序在从低版本升级到17版本后，性能有一定的提升。</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>更新于 2026-02-04</span></div><div id=page-views class=post-info-mod></div></div><div class=post-info-line><div class=post-info-md><span><a class=link-to-markdown href=/func/index.md target=_blank>阅读原始文档</a></span></div><div class=post-info-share><span></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/tags/go/>Go</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主页</a></span></section></div><div class=post-nav><a href=/gmp/ class=prev rel=prev title=GMP调度模型><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>GMP调度模型</a>
<a href=/database_sql/ class=next rel=next title=database/sql>database/sql<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2019 - 2026</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank>zg</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title=回到顶部><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i></a></div><div id=fixed-buttons-hidden><a href=# id=view-comments class=fixed-button title=查看评论><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><link rel=stylesheet href=/lib/katex/katex.min.css><link rel=stylesheet href=/lib/cookieconsent/cookieconsent.min.css><script src=/lib/autocomplete/autocomplete.min.js></script><script src=/lib/lunr/lunr.min.js></script><script src=/lib/lunr/lunr.stemmer.support.min.js></script><script src=/lib/lunr/lunr.zh.min.js></script><script src=/lib/lazysizes/lazysizes.min.js></script><script src=/lib/clipboard/clipboard.min.js></script><script src=/lib/typeit/index.umd.js></script><script src=/lib/katex/katex.min.js></script><script src=/lib/katex/contrib/auto-render.min.js></script><script src=/lib/katex/contrib/copy-tex.min.js></script><script src=/lib/katex/contrib/mhchem.min.js></script><script src=/lib/cookieconsent/cookieconsent.min.js></script><script>window.config={comment:{},cookieconsent:{content:{dismiss:"同意",link:"了解更多",message:"本网站使用 Cookies 来改善您的浏览体验."},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},data:{"id-1":"zg's blog","id-2":"zg's blog"},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{highlightTag:"em",lunrIndexURL:"/index.json",lunrLanguageCode:"zh",lunrSegmentitURL:"/lib/lunr/lunr.segmentit.js",maxResultLength:10,noResultsFound:"没有找到结果",snippetLength:30,type:"lunr"},typeit:{cursorChar:"|",cursorSpeed:1e3,data:{"id-1":["id-1"],"id-2":["id-2"]},duration:-1,speed:100}}</script><script src=/js/theme.min.js></script></body></html>